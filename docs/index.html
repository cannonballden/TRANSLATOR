<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Elephant Translator — Demo (reset-stable v1)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
<header>
  <div class="wrap">
    <h1>Elephant Translator <span class="badge">reset-stable v1</span></h1>
    <p class="tagline">Heuristic audio + motion + interactions (conservative, evidence-first)</p>
  </div>
</header>

<main class="wrap">
  <section class="panel">
    <h2>1) Connect to your server</h2>
    <div class="server-row">
      <span class="dot" id="dot"></span>
      <input id="serverUrl" type="url" placeholder="https://9200-…githubpreview.dev (no trailing slash)" />
      <button id="saveServer">Save</button>
      <button id="checkHealth">Health</button>
    </div>
    <p class="muted small">Paste the <b>Public</b> URL from the Codespaces <b>Ports</b> panel (we’ll use port 9200). Click <b>Health</b> to verify.</p>
    <div id="configLine" class="muted small"></div>
  </section>

  <section class="panel">
    <h2>2) Upload & preview</h2>
    <div id="drop" class="drop">
      <input id="fileInput" type="file" accept="audio/*,video/*" />
      <p>Drag & drop a clip here (WAV/MP3/MP4/WebM…). Short clips (5–20s) are best to start.</p>
    </div>

    <div id="playerWrap" class="player hidden">
      <video id="player" class="media" controls></video>
      <audio id="audioPlayer" class="media" controls></audio>
    </div>

    <div class="actions">
      <label class="small"><input type="checkbox" id="motionToggle" checked /> Analyze motion & interactions (video)</label>
      <button id="analyzeBtn">Analyze</button>
      <a id="downloadBtn" class="button" download disabled>Download JSON</a>
      <span id="status" class="muted"></span>
      <progress id="prog" value="0" max="100" class="hidden"></progress>
    </div>

    <details class="tips">
      <summary>Tips for best results</summary>
      <ul>
        <li>Short clips (5–20s). Large files switch to resumable mode automatically.</li>
        <li><b>ffmpeg</b> enables decoding; <b>opencv-python</b> adds optical flow; <b>ultralytics</b> (YOLO) improves interaction detection.</li>
        <li>Minimize wind/crowd noise; keep elephants visible.</li>
        <li>Outputs are heuristic hints, not guarantees—treat them as <b>evidence-based suggestions</b>.</li>
      </ul>
    </details>
  </section>

  <section id="filters" class="panel hidden">
    <h2>3) Results</h2>

    <div class="legend">
      <span class="swatch trumpet">Trumpet</span>
      <span class="swatch rumble">Rumble</span>
      <span class="swatch roar">Roar</span>
      <span class="swatch resting">Resting</span>
      <span class="swatch chorus">Greeting chorus</span>
      <span class="swatch other">Other</span>
    </div>

    <div class="filter-row">
      <label><input type="checkbox" data-f="trumpet" checked /> trumpet</label>
      <label><input type="checkbox" data-f="rumble" checked /> rumbles</label>
      <label><input type="checkbox" data-f="roar" checked /> roars</label>
      <label><input type="checkbox" data-f="resting" checked /> resting</label>
      <label><input type="checkbox" data-f="chorus" checked /> greeting</label>
      <label><input type="checkbox" data-f="other" checked /> other</label>
    </div>

    <div id="summary" class="summary"></div>
    <div id="diagnostics" class="diag"></div>

    <div id="timeline" title="Click to seek"></div>
    <div id="markers"></div>

    <div id="playbyplay"></div>
  </section>
</main>

<footer class="wrap footnote">
  <p class="muted small">Do not approach wildlife; this demo is not a behavioral guarantee.</p>
</footer>

<script src="app.js"></script>
</body>
</html>
